{% extends 'base.html.twig' %}

{% block title %}Submission Management!{% endblock %}
{% block stylesheets %}
{% endblock %}
{% block javascripts %}
  <script>
  $(document).ready(function(){
    $("#loader").show();
    setTimeout(function(){
       loadajax();
     },3000); // milliseconds

  
});
function loadajax(){
  var availableTags = function () {
      var tmp = null;
      $.ajax({
          'async': false,
          'type': "GET",
          'dataType': 'json',
          'url': "https://127.0.0.1:8000/student",
          'complete': function(){
            $("#loader").hide();
          },
          'success': function (data) {
              tmp = data.slice();
              $(".container").show();
          }
      });
      return tmp;
    }();
Object.values = function(object) {
  var values = [];
  for(var property in object) {
    values.push(object[property].code);
  }
  return values;
}
   console.log(Object.values(availableTags));
    $( "#tags" ).autocomplete({
      source: Object.values(availableTags)
    });
}
  </script>
{% endblock %}
{% block body %}
<div id="loader" style="margin-top:10px">
<img src="{{ path("get_photo", {'filename' : 'loading.gif'}) }}">
</div>
 <div class="container">
        {{ form_start(form) }}
        <div class="ui-widget">
            <label for="tags" class="form-label">Student Code: </label>
            <input id="tags" class="form-control" name="student_Id" required>
        </div>
        {{ form_widget(form) }}
        <button class="btn btn-success mt-5" id="sendData">Submit</button>
        {{ form_end(form) }}
    </div>
{% endblock %}
